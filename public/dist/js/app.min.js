"use strict";var APP=APP||{};APP.launcher=function(){function e(){document.addEventListener("DOMContentLoaded",function(){APP.router.init(),APP.serviceworker.init(),APP.fonts.init()})}return{init:e}}(),APP.launcher.init(),APP.fonts=function(){function e(){var e=new FontFaceObserver("Raleway");Promise.all([e.check()]).then(function(){document.documentElement.className+=" fonts-loaded"})}return{init:e}}(),APP.page=function(){function e(e,t){return new Promise(function(n,a){var r=new XMLHttpRequest;r.open(e,t),r.onload=function(){this.status>=200&&this.status<300?n(r.response):a({status:this.status,statusText:r.statusText})},r.onerror=function(){a({status:this.status,statusText:r.statusText})},r.send()})}function t(){e("GET","api/feed").then(function(e){r.innerHTML=e})["catch"](function(e){console.error("Augh, there was an error!",e.statusText)})}function n(t){e("GET","api/appearance/"+t).then(function(e){r.innerHTML=e,APP.page.appearanceToggle()})["catch"](function(e){console.error("Oh no, there was an error!",e.statusText)})}function a(){var e=document.querySelector(".appearance__product"),t=document.querySelector('.appearance__indicator[data-uuid="'+e.getAttribute("data-uuid")+'"]'),n=document.querySelectorAll(".appearance__indicator");e.classList.add("appearance__product--active"),t.classList.add("appearance__indicator--active"),Array.prototype.forEach.call(n,function(e){e.addEventListener("click",function(e){var t=e.currentTarget.getAttribute("data-uuid");document.querySelector(".appearance__product--active").classList.remove("appearance__product--active"),document.querySelector(".appearance__indicator--active").classList.remove("appearance__indicator--active"),document.querySelector('.appearance__product[data-uuid="'+t+'"]').classList.add("appearance__product--active"),e.currentTarget.classList.add("appearance__indicator--active")})})}var r=document.querySelector("main");return{request:e,feed:t,appearance:n,appearanceToggle:a}}(),APP.router=function(){function e(){window.location.hash||(window.location="/#home"),routie({home:function(){APP.page.feed()},"appearance/:uuid":function(e){APP.page.appearance(e)}})}return{init:e}}(),APP.serviceworker=function(){function e(){"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js",{scope:"./"}).then(function(e){console.log("registered sw scoped to "+e.scope)}):console.log("ServiceWorker is not supported")}return{init:e}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJhcHAtbW9kdWxlLmpzIiwiZm9udHMtbW9kdWxlLmpzIiwicGFnZS1tb2R1bGUuanMiLCJyb3V0ZXItbW9kdWxlLmpzIiwic3ctbW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFQUCIsImxhdW5jaGVyIiwiaW5pdCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJvdXRlciIsInNlcnZpY2V3b3JrZXIiLCJmb250cyIsIm9ic2VydmVyIiwiRm9udEZhY2VPYnNlcnZlciIsIlByb21pc2UiLCJhbGwiLCJjaGVjayIsInRoZW4iLCJkb2N1bWVudEVsZW1lbnQiLCJjbGFzc05hbWUiLCJwYWdlIiwicmVxdWVzdCIsIm1ldGhvZCIsInVybCIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJ0aGlzIiwic3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsInNlbmQiLCJmZWVkIiwidGVtcGxhdGUiLCJtYWluU2VsZWN0b3IiLCJpbm5lckhUTUwiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhcHBlYXJhbmNlIiwidXVpZCIsImFwcGVhcmFuY2VUb2dnbGUiLCJmaXJzdFByb2R1Y3QiLCJxdWVyeVNlbGVjdG9yIiwiZmlyc3RJbmRpY2F0b3IiLCJnZXRBdHRyaWJ1dGUiLCJpbmRpY2F0b3JzIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsImFkZCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlbCIsImV2ZW50IiwiaWQiLCJjdXJyZW50VGFyZ2V0IiwicmVtb3ZlIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwicm91dGllIiwiaG9tZSIsImFwcGVhcmFuY2UvOnV1aWQiLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJzY29wZSIsInJlZyIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsWUNH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InVzZSBzdHJpY3RcIjtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcblx0TkFNRVNQQUNFIFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xudmFyIEFQUCA9IEFQUCB8fCB7fTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcbiAgICBMQVVOQ0ggQVBQXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5BUFAubGF1bmNoZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBBUFAucm91dGVyLmluaXQoKTtcbiAgICAgICAgICAgIEFQUC5zZXJ2aWNld29ya2VyLmluaXQoKTtcbiAgICAgICAgICAgIEFQUC5mb250cy5pbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbn0oKTtcblxuQVBQLmxhdW5jaGVyLmluaXQoKTtcblwidXNlIHN0cmljdFwiO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxuICAgIEZPTlRTIEFQUFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQVBQLmZvbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEZvbnRGYWNlT2JzZXJ2ZXIoJ1JhbGV3YXknKTtcbiAgICAgICAgUHJvbWlzZS5hbGwoW29ic2VydmVyLmNoZWNrKCldKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgKz0gXCIgZm9udHMtbG9hZGVkXCI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXRcbiAgICB9O1xufSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxuXHRQQUdFIE1PRFVMRSBbd2l0aCBQcm9taXNlXVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQVBQLnBhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgbWFpblNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuXG4gICAgZnVuY3Rpb24gcmVxdWVzdChtZXRob2QsIHVybCkge1xuICAgICAgICAvLyBzcmM6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwMDgxMTQvaG93LWRvLWktcHJvbWlzaWZ5LW5hdGl2ZS14aHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZmVlZCgpIHtcbiAgICAgICAgcmVxdWVzdCgnR0VUJywgJ2FwaS9mZWVkJykudGhlbihmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIG1haW5TZWxlY3Rvci5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXVnaCwgdGhlcmUgd2FzIGFuIGVycm9yIScsIGVyci5zdGF0dXNUZXh0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFwcGVhcmFuY2UodXVpZCkge1xuICAgICAgICByZXF1ZXN0KCdHRVQnLCAnYXBpL2FwcGVhcmFuY2UvJyArIHV1aWQpLnRoZW4oZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBtYWluU2VsZWN0b3IuaW5uZXJIVE1MID0gdGVtcGxhdGU7XG4gICAgICAgICAgICBBUFAucGFnZS5hcHBlYXJhbmNlVG9nZ2xlKCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ09oIG5vLCB0aGVyZSB3YXMgYW4gZXJyb3IhJywgZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYXBwZWFyYW5jZVRvZ2dsZSgpIHtcbiAgICAgICAgLy9zcmM6IGh0dHBzOi8vZ2l0aHViLmNvbS9kb25ueXdhbHMvbG9va2xpdmUtc2VydmVyXG4gICAgICAgIHZhciBmaXJzdFByb2R1Y3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwZWFyYW5jZV9fcHJvZHVjdCcpO1xuICAgICAgICB2YXIgZmlyc3RJbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwZWFyYW5jZV9faW5kaWNhdG9yW2RhdGEtdXVpZD1cIicgKyBmaXJzdFByb2R1Y3QuZ2V0QXR0cmlidXRlKCdkYXRhLXV1aWQnKSArICdcIl0nKTtcbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXBwZWFyYW5jZV9faW5kaWNhdG9yJyk7XG5cbiAgICAgICAgZmlyc3RQcm9kdWN0LmNsYXNzTGlzdC5hZGQoJ2FwcGVhcmFuY2VfX3Byb2R1Y3QtLWFjdGl2ZScpO1xuICAgICAgICBmaXJzdEluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhcHBlYXJhbmNlX19pbmRpY2F0b3ItLWFjdGl2ZScpO1xuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaW5kaWNhdG9ycywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXV1aWQnKTtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBlYXJhbmNlX19wcm9kdWN0LS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhcHBlYXJhbmNlX19wcm9kdWN0LS1hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBlYXJhbmNlX19pbmRpY2F0b3ItLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FwcGVhcmFuY2VfX2luZGljYXRvci0tYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwZWFyYW5jZV9fcHJvZHVjdFtkYXRhLXV1aWQ9XCInICsgaWQgKyAnXCJdJykuY2xhc3NMaXN0LmFkZCgnYXBwZWFyYW5jZV9fcHJvZHVjdC0tYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FwcGVhcmFuY2VfX2luZGljYXRvci0tYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3QsXG4gICAgICAgIGZlZWQ6IGZlZWQsXG4gICAgICAgIGFwcGVhcmFuY2U6IGFwcGVhcmFuY2UsXG4gICAgICAgIGFwcGVhcmFuY2VUb2dnbGU6IGFwcGVhcmFuY2VUb2dnbGVcbiAgICB9O1xufSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICBcblx0Uk9VVEVSIE1PRFVMRSBbd2l0aCByb3V0ZXIgbGliOiBSb3V0aWVdXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5BUFAucm91dGVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvI2hvbWUnO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRpZSh7XG4gICAgICAgICAgICAnaG9tZSc6IGZ1bmN0aW9uIGhvbWUoKSB7XG4gICAgICAgICAgICAgICAgQVBQLnBhZ2UuZmVlZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdhcHBlYXJhbmNlLzp1dWlkJzogZnVuY3Rpb24gYXBwZWFyYW5jZVV1aWQodXVpZCkge1xuICAgICAgICAgICAgICAgIEFQUC5wYWdlLmFwcGVhcmFuY2UodXVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbn0oKTtcbid1c2Ugc3RyaWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgXG5cdFNFUlZJQ0UgV09SS0VSIE1PRFVMRVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQVBQLnNlcnZpY2V3b3JrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzdy5qcycsIHsgc2NvcGU6ICcuLycgfSkudGhlbihmdW5jdGlvbiAocmVnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyZWQgc3cgc2NvcGVkIHRvICcgKyByZWcuc2NvcGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07XG59KCk7IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcblx0TkFNRVNQQUNFIFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xudmFyIEFQUCA9IEFQUCB8fCB7fTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcbiAgICBMQVVOQ0ggQVBQXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIFxuQVBQLmxhdW5jaGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgXG4gICAgZnVuY3Rpb24gaW5pdCgpIHsgICAgIFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7IFxuICAgICAgICAgICAgQVBQLnJvdXRlci5pbml0KCk7XG4gICAgICAgICAgICBBUFAuc2VydmljZXdvcmtlci5pbml0KCk7XG4gICAgICAgICAgICBBUFAuZm9udHMuaW5pdCgpO1xuICAgICAgICB9KTsgICAgICAgICAgICBcbiAgICB9OyAgICBcbiAgICBcbiAgICByZXR1cm4geyBcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07XG4gICAgXG59KCkpO1xuXG5BUFAubGF1bmNoZXIuaW5pdCgpOyIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogXG4gICAgRk9OVFMgQVBQXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5BUFAuZm9udHMgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEZvbnRGYWNlT2JzZXJ2ZXIoJ1JhbGV3YXknKTsgICAgICAgIFxuICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgb2JzZXJ2ZXIuY2hlY2soKVxuICAgICAgICBdKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgKz0gXCIgZm9udHMtbG9hZGVkXCI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcblxufSgpKTsiLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxuXHRQQUdFIE1PRFVMRSBbd2l0aCBQcm9taXNlXVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQVBQLnBhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIFxuICAgIHZhciBtYWluU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG5cbiAgICBmdW5jdGlvbiByZXF1ZXN0KG1ldGhvZCwgdXJsKSB7IC8vIHNyYzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDAwODExNC9ob3ctZG8taS1wcm9taXNpZnktbmF0aXZlLXhoclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBmZWVkKCkge1xuICAgICAgICByZXF1ZXN0KCdHRVQnLCAnYXBpL2ZlZWQnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgbWFpblNlbGVjdG9yLmlubmVySFRNTCA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXVnaCwgdGhlcmUgd2FzIGFuIGVycm9yIScsIGVyci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhcHBlYXJhbmNlKHV1aWQpIHtcbiAgICAgICAgcmVxdWVzdCgnR0VUJywgJ2FwaS9hcHBlYXJhbmNlLycgKyB1dWlkKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgbWFpblNlbGVjdG9yLmlubmVySFRNTCA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIEFQUC5wYWdlLmFwcGVhcmFuY2VUb2dnbGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ09oIG5vLCB0aGVyZSB3YXMgYW4gZXJyb3IhJywgZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgfSk7ICAgICAgICBcblxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhcHBlYXJhbmNlVG9nZ2xlKCkgeyAvL3NyYzogaHR0cHM6Ly9naXRodWIuY29tL2Rvbm55d2Fscy9sb29rbGl2ZS1zZXJ2ZXJcbiAgICAgICAgdmFyIGZpcnN0UHJvZHVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBlYXJhbmNlX19wcm9kdWN0Jyk7XG4gICAgICAgIHZhciBmaXJzdEluZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBlYXJhbmNlX19pbmRpY2F0b3JbZGF0YS11dWlkPVwiJyArIGZpcnN0UHJvZHVjdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXVpZCcpICsgJ1wiXScpO1xuICAgICAgICB2YXIgaW5kaWNhdG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHBlYXJhbmNlX19pbmRpY2F0b3InKTtcblxuICAgICAgICBmaXJzdFByb2R1Y3QuY2xhc3NMaXN0LmFkZCgnYXBwZWFyYW5jZV9fcHJvZHVjdC0tYWN0aXZlJyk7XG4gICAgICAgIGZpcnN0SW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2FwcGVhcmFuY2VfX2luZGljYXRvci0tYWN0aXZlJyk7XG5cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpbmRpY2F0b3JzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXVpZCcpO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5hcHBlYXJhbmNlX19wcm9kdWN0LS1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnYXBwZWFyYW5jZV9fcHJvZHVjdC0tYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmFwcGVhcmFuY2VfX2luZGljYXRvci0tYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ2FwcGVhcmFuY2VfX2luZGljYXRvci0tYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmFwcGVhcmFuY2VfX3Byb2R1Y3RbZGF0YS11dWlkPVwiJyArIGlkICsgJ1wiXScpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCdhcHBlYXJhbmNlX19wcm9kdWN0LS1hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYXBwZWFyYW5jZV9faW5kaWNhdG9yLS1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdCxcbiAgICAgICAgZmVlZDogZmVlZCxcbiAgICAgICAgYXBwZWFyYW5jZTogYXBwZWFyYW5jZSxcbiAgICAgICAgYXBwZWFyYW5jZVRvZ2dsZTogYXBwZWFyYW5jZVRvZ2dsZVxuICAgIH07XG5cbn0pKCk7IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgXG5cdFJPVVRFUiBNT0RVTEUgW3dpdGggcm91dGVyIGxpYjogUm91dGllXVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAgICAgIFxuQVBQLnJvdXRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gaW5pdCAoKSB7XG4gICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvI2hvbWUnO1xuICAgICAgICB9ICAgICAgICBcbiAgICAgICAgcm91dGllKHtcbiAgICAgICAgICAgICdob21lJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgQVBQLnBhZ2UuZmVlZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdhcHBlYXJhbmNlLzp1dWlkJzogZnVuY3Rpb24odXVpZCkge1xuICAgICAgICAgICAgICAgIEFQUC5wYWdlLmFwcGVhcmFuY2UodXVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07ICAgICBcbiAgICBcbn0pKCk7XG4gICAgIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgXG5cdFNFUlZJQ0UgV09SS0VSIE1PRFVMRVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAgIFxuQVBQLnNlcnZpY2V3b3JrZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc3cuanMnLCB7IHNjb3BlOiAnLi8nIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVnKSB7IGNvbnNvbGUubG9nKCdyZWdpc3RlcmVkIHN3IHNjb3BlZCB0byAnICsgcmVnLnNjb3BlKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07IFxuICAgIFxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
